<html>

<head><script src="openvidu-browser-2.22.0.min.js"></script></head>

<body>
    <div id="big-video-div">
        <p>big</p>
    </div>
    <div id="smaill-video-div">
        <p>small</p>
    </div>
</body>

<script>
    var url = new URL(window.location.href);
    var SESSION_ID = url.searchParams.get("sessionId");
    var SECRET = url.searchParams.get("secret");
    var TOKEN = 'wss://' + location.host + '?sessionId=' + SESSION_ID + '&secret=' + SECRET + '&recorder=true';

    var OV = new OpenVidu();
    var session = OV.initSession();
    var recorder = " ";

    var subscribers = new Map

    session.on('signal:startInterview', (e) => { 
        recorder = e.data
    })

    session.on("streamCreated", (event) => {
        console.log("recorder and nowStreamer")
        var now = JSON.parse(event.stream.connection.data).clientData
        console.log(recorder)
        console.log(now)
        if(now === recorder || JSON.parse(stream.connection.data).isEE === "Y"){
            session.subscribe(event.stream, 'big-video-div')
        } else {
            session.subscribe(event.stream, 'smaill-video-div')
        }
    });

    this.session.on("streamDestroyed", ({ stream }) => {
        console.log("publisher out")
    });

    session.connect(TOKEN)
        .then((event) => { 
            console.log('Recorder participant connected')
         })
        .catch(error => { console.error(error) });
</script>

</html>